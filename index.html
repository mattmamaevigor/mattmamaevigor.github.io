<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Core 1.0 - Ultimate AI</title>
<style>
    body { margin:0; font-family: 'Courier New', monospace; background:#111; color:#fff; overflow-x:hidden;}
    .container { display:none; padding:20px;}
    h1 { font-size:2.5em; text-align:center; margin-bottom:0; }
    .subtitle { text-align:center; margin-top:0; color:#888;}
    .mode-btn { padding:10px 20px; margin:5px; cursor:pointer; border:none; background:#222; color:#fff; }
    .mode-btn.active { color:yellow; }
    .form-group { margin-bottom:10px; }
    input, select, textarea { width:100%; padding:8px; margin-top:5px; background:#222; color:#fff; border:none; border-radius:5px; }
    button.btn { padding:10px; margin-top:10px; cursor:pointer; border:none; border-radius:5px; background:#4ecdc4; color:#111; font-weight:bold;}
    #contentOutput { background:#000; padding:10px; min-height:150px; white-space:pre-wrap; border-radius:5px; margin-top:10px; }
    .error-message { color:#ff6b6b; }
    .gaster-glyph { position:absolute; font-size:20px; color:#0ff; animation: float 5s infinite; }
    @keyframes float { 0% {transform:translateY(0);} 50% {transform:translateY(-20px);} 100% {transform:translateY(0);} }
    .tariff-badge { position:fixed; top:10px; right:10px; background:#222; color:#4ecdc4; padding:5px 10px; border-radius:5px; display:none;}
    .glitch-text { position:relative; display:inline-block; }
    .glitch-text::after, .glitch-text::before { content:attr(data-text); position:absolute; left:0; top:0; }
    .glitch-text::before { animation:glitch1 2s infinite; color:#f0f; }
    .glitch-text::after { animation:glitch2 2s infinite; color:#0ff; }
    @keyframes glitch1 { 0%{transform:translate(2px,0);} 20%{transform:translate(-2px,-2px);} 40%{transform:translate(2px,2px);} 60%{transform:translate(-2px,1px);} 80%{transform:translate(1px,-1px);} 100%{transform:translate(0,0);} }
    @keyframes glitch2 { 0%{transform:translate(-2px,0);} 20%{transform:translate(2px,2px);} 40%{transform:translate(-2px,-2px);} 60%{transform:translate(2px,-1px);} 80%{transform:translate(-1px,1px);} 100%{transform:translate(0,0);} }
</style>
</head>
<body>

<!-- Глифы Гастера -->
<div class="gaster-glyph" style="top:10%; left:5%;">✡</div>
<div class="gaster-glyph" style="top:20%; left:90%;">❄</div>
<div class="gaster-glyph" style="top:40%; left:15%;">⌖</div>
<div class="gaster-glyph" style="top:60%; left:80%;">⯊</div>
<div class="gaster-glyph" style="top:80%; left:10%;">⛦</div>
<div class="gaster-glyph" style="top:30%; left:75%;">❍</div>

<!-- Модальное окно выбора тарифа -->
<div class="tariff-modal" id="tariffModal" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);display:flex;justify-content:center;align-items:center;flex-direction:column; z-index:999;">
    <h2>Выберите тариф</h2>
    <div style="display:flex; gap:10px;">
        <button class="mode-btn" data-tier="basic">BASIC (10 запросов)</button>
        <button class="mode-btn" data-tier="tester">TESTER (без ограничений)</button>
        <button class="mode-btn" data-tier="developer">DEVELOPER (код)</button>
    </div>
    <input type="text" id="devCodeInput" placeholder="Введите код разработчика" style="display:none; margin-top:10px; padding:5px;"/>
    <button class="btn" id="selectTariffBtn">Подтвердить</button>
</div>

<div class="container" id="mainContainer">
    <h1 class="glitch-text" data-text="Core 1.0">Core 1.0</h1>
    <p class="subtitle">Ultimate AI Interface</p>

    <div style="display:flex; gap:10px; margin-bottom:10px;">
        <button class="mode-btn active" data-mode="code">Генерация кода</button>
        <button class="mode-btn" data-mode="text">Генерация текста</button>
    </div>

    <div class="form-group" id="codeMode">
        <label>Описание задачи:</label>
        <textarea id="description" rows="4" placeholder="Опишите задачу или текст"></textarea>
    </div>

    <div class="form-group" id="textMode" style="display:none;">
        <label>Описание текста:</label>
        <textarea id="textDescription" rows="4" placeholder="Опишите текст"></textarea>
    </div>

    <button class="btn" id="generateBtn">Генерировать</button>
    <div id="contentOutput">Здесь появится сгенерированный контент...</div>
    <button class="btn" id="copyBtn">Копировать</button>

</div>

<div class="tariff-badge" id="tariffBadge">Текущий тариф: <span id="currentTier"></span></div>

<script>
const devCode = "070217";
let currentTier = '';
let currentMode = 'code';
let lastGeneratedContent = '';
let apiToken = "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";
let generationCount = 0;

// Глифы анимация
document.querySelectorAll('.gaster-glyph').forEach(g=>{
    g.style.animationDuration = (3 + Math.random()*3)+'s';
    g.style.fontSize = (15 + Math.random()*25)+'px';
});

// Выбор тарифа
document.querySelectorAll('.tariff-modal .mode-btn').forEach(btn=>{
    btn.addEventListener('click', ()=>{
        document.querySelectorAll('.tariff-modal .mode-btn').forEach(b=>b.style.color='#fff');
        btn.style.color='yellow';
        if(btn.dataset.tier==='developer') document.getElementById('devCodeInput').style.display='block';
        else document.getElementById('devCodeInput').style.display='none';
    });
});

document.getElementById('selectTariffBtn').addEventListener('click', ()=>{
    let selected = document.querySelector('.tariff-modal .mode-btn[style*="yellow"]');
    if(!selected){ alert('Выберите тариф'); return; }
    let tier = selected.dataset.tier;
    if(tier==='developer'){
        let code = document.getElementById('devCodeInput').value.trim();
        if(code!==devCode){ alert('Неверный код'); return; }
    }
    currentTier = tier;
    document.getElementById('tariffBadge').style.display='block';
    document.getElementById('currentTier').textContent=tier.toUpperCase();
    document.getElementById('tariffModal').style.display='none';
});

// Переключение режимов
document.querySelectorAll('.mode-btn[data-mode]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
        currentMode = btn.dataset.mode;
        document.querySelectorAll('.mode-btn[data-mode]').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        if(currentMode==='code'){
            document.getElementById('codeMode').style.display='block';
            document.getElementById('textMode').style.display='none';
        } else {
            document.getElementById('codeMode').style.display='none';
            document.getElementById('textMode').style.display='block';
        }
    });
});

// Генерация контента
document.getElementById('generateBtn').addEventListener('click', async ()=>{
    if(currentTier==='basic'){
        if(generationCount>=10){ alert('Лимит 10 запросов исчерпан'); return; }
        generationCount++;
    }
    let prompt = currentMode==='code'? document.getElementById('description').value : document.getElementById('textDescription').value;
    if(!prompt){ alert('Введите описание'); return; }

    let outputEl = document.getElementById('contentOutput');
    outputEl.textContent='Генерация...';

    try{
        const response = await fetch("https://api-inference.huggingface.co/models/gpt2", {
            method:"POST",
            headers:{ "Authorization":"Bearer "+apiToken, "Content-Type":"application/json"},
            body: JSON.stringify({inputs:prompt})
        });
        const data = await response.json();
        if(data.error){ outputEl.textContent='Ошибка генерации: '+data.error; return; }
        // Hugging Face возвращает массив объектов с generated_text
        if(Array.isArray(data) && data[0].generated_text) lastGeneratedContent = data[0].generated_text;
        else if(data.hasOwnProperty('generated_text')) lastGeneratedContent = data.generated_text;
        else lastGeneratedContent = JSON.stringify(data,null,2);
        outputEl.textContent=lastGeneratedContent;
    } catch(err){
        outputEl.textContent='Ошибка запроса: '+err;
    }
});

// Копировать
document.getElementById('copyBtn').addEventListener('click', ()=>{
    if(!lastGeneratedContent) return;
    navigator.clipboard.writeText(lastGeneratedContent).then(()=>alert('Скопировано!'));
});
</script>

</body>
</html>
